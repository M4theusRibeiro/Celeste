<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ranking</title>
    <link rel="stylesheet" href="../styles/styles-gerais.css">
    <link rel="stylesheet" href="../styles/ranking.css">
    <link rel="stylesheet" href="@sweetalert2/themes/dark/dark.css">
    <link rel="icon" href="../assets/icon/backpack.png">
    
    <script src="../js/funcoes.js"></script>
    <script src="../js/ranking.js"></script>
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="sweetalert2/dist/sweetalert2.min.js"></script>
    <link href="//cdn.jsdelivr.net/npm/@sweetalert2/theme-dark@4/dark.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.js"></script>
</head>

<body onload="atualizarFeed(), corPersonagem(), temaAtual(), validarSessao()">
    <header>
        <nav>
            <span class="icon">
                <span>
                    <a href="pico8.html"><img src="../assets/img/morango.png"></a>
                </span>
                <span>
                    <a onclick="trocarTema()"><img id="imgIcone" src="../assets/img/red.png"></a>
                </span>
            </span>
            <div class="navbar">
                <ul>
                    <li>
                        <a class="txtBranco" onclick="limparSessao()">Sair</a>
                    </li>
                    <li class="btn">
                        <a class="txtBranco" href="../index.html">Home</a>
                    </li>
                    <li>
                        <a class="txtBranco" href="/dashboard/game.html">Jogo</a>
                    </li>
                    <li>
                        <a id="cor" href="/dashboard/ranking.html">Ranking</a>
                    </li>
                    <li>
                        <a class="txtBranco" href="/dashboard/dashInicial.html">Dashboard</a>
                    </li>
                    <li>
                        <a class="txtBranco" href="/dashboard/mural.html">Fórum</a>
                    </li>
                </ul>
            </div>
            </div>
            </div>
        </nav>
    </header>
    <main>
        <div class="banner">
            <div class="container-ranking">
              <span class="titulo">TABELA DE PONTOS</span>  
                <div class="tabela">
                    <div class="posicao">
                        <span class="colocado"><img src="../assets/img/1st.png" width="50%" height="50%"></span>
                    </div>
                    <div class="foto1">
                        <img id="foto1" width="100%" height="100%"
                            src="../assets/img/personagensGif/madeline/normal.gif">
                    </div>
                    <div class="nome" id="nome1">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao1">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        <span class="colocado"><img src="../assets/img/2nd.png" width="50%" height="50%"></span>              
                    </div>
                    <div class="foto2">
                        <img id="foto2" width="100%" height="100%"
                            src="../assets/img/personagensGif/badeline/normal.gif">
                    </div>
                    <div class="nome" id="nome2">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao2">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        <span class="colocado"><img src="../assets/img/3rd.png" width="100%" height="100%"></span>
                    </div>
                    <div class="foto3">
                        <img id="foto3" width="100%" height="100%" src="../assets/img/personagensGif/oshiro/normal.gif">
                    </div>
                    <div class="nome" id="nome3">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao3">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                       <span >4º</span>
                    </div>
                    <div class="foto4">
                        <img id="foto4" width="100%" height="100%" src="../assets/img/personagensGif/theo/normal.gif">
                    </div>
                    <div class="nome" id="nome4">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao4">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        5º
                    </div>
                    <div class="foto5" id="foto5">
                        <img width="100%" height="100%" src="../assets/img/personagensGif/vovo/normal.gif">
                    </div>
                    <div class="nome" id="nome5">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao5">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        6º
                    </div>
                    <div class="foto6" id="foto6">
                        <img width="100%" height="100%" src="../assets/img/personagensGif/madeline/normal.gif">
                    </div>
                    <div class="nome" id="nome6">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao6">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        7º
                    </div>
                    <div class="foto7" id="foto7">
                        <img width="100%" height="100%" src="../assets/img/personagensGif/badeline/normal.gif">
                    </div>
                    <div class="nome" id="nome7">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao7">
                        ---
                    </div>
                </div>
                <div class="tabela">
                    <div class="posicao">
                        8º
                    </div>
                    <div class="foto8" id="foto8">
                        <img width="100%" height="100%" src="../assets/img/personagensGif/theo/normal.gif">
                    </div>
                    <div class="nome" id="nome8">
                        -----
                    </div>
                    <div class="pontuacao" id="pontuacao8">
                        ---
                    </div>
                </div>

            </div>
        </div>
        </div>
    </main>



</body>

</html>

<script>

    function atualizarFeed() {
        //aguardar();
        fetch("/ranking/listar").then(function (resposta) {
            if (resposta.ok) {
                if (resposta.status == 204) {
                    console.log("Nenhum resultado encontrado!!")
                    throw "Nenhum resultado encontrado!!";
                }
                resposta.json().then(function (resposta) {
                    console.log("Dados recebidos: ", JSON.stringify(resposta));

                    for (let i = 0; i < resposta.length; i++) {
                        var ranking = resposta[i];

                        if (i == 0) {
                            nome1.innerHTML = ranking.nome
                            pontuacao1.innerHTML = ranking.pontuacao
                            document.getElementById("foto1").src = ranking.img;
                        } else if (i == 1) {
                            nome2.innerHTML = ranking.nome
                            pontuacao2.innerHTML = ranking.pontuacao
                            document.getElementById("foto2").src = ranking.img;
                        } else if (i == 2) {
                            nome3.innerHTML = ranking.nome
                            pontuacao3.innerHTML = ranking.pontuacao
                            document.getElementById("foto3").src = ranking.img;
                        } else if (i == 3) {
                            nome4.innerHTML = ranking.nome
                            pontuacao4.innerHTML = ranking.pontuacao
                            document.getElementById("foto4").src = ranking.img;
                        } else if (i == 4) {
                            nome5.innerHTML = ranking.nome
                            pontuacao5.innerHTML = ranking.pontuacao
                            document.getElementById("foto5").src = ranking.img;
                        } else if (i == 5) {
                            nome6.innerHTML = ranking.nome
                            pontuacao6.innerHTML = ranking.pontuacao
                            document.getElementById("foto6").src = ranking.img;
                        } else if (i == 6) {
                            nome7.innerHTML = ranking.nome
                            pontuacao7.innerHTML = ranking.pontuacao
                            document.getElementById("foto7").src = ranking.img;
                        } else if (i == 7) {
                            nome8.innerHTML = ranking.nome
                            pontuacao8.innerHTML = ranking.pontuacao
                            document.getElementById("foto8").src = ranking.img;
                        }
                    }
                });
            } else {
                throw ('Houve um erro na API!');
            }
        }).catch(function (resposta) {
            console.error(resposta);

        });
    }


</script>